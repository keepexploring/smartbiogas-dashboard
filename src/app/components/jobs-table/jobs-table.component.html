<table *ngIf="jobs" [class.table-hover]="selectable" class="table table-bordered mb-0">
  <thead class="bg-light">
    <tr>
      <th class="" scope="col">ID</th>
      <th scope="col">Flagged</th>
      <th class="" scope="col">Fault Description</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let job of jobs | paginate: { itemsPerPage: itemsPerPage, currentPage: page, totalItems: totalItems, id: 'jobsTableResults' }" (click)="select(job)" [class.bg-light]="selectable && selectedJob == job" data-toggle="modal" data-target="#jobDetailModal">
      <td>
        <app-job-status [status]="job.job_status" [size]="'small'"></app-job-status>
      </td>
      <td class="small">
        {{ job.date_flagged ? (job.date_flagged | date) : 'Unknown' }}
      </td>
      <td>
        {{ job.fault_description ? job.fault_description.substring(0, 30) + '...' : 'N/A' }}
      </td>
    </tr>
  </tbody>
</table>

<div class="table-pagination border-top">
  <app-loading *ngIf="loading"></app-loading>
  <pagination-controls *ngIf="totalItems > itemsPerPage && !loading" (pageChange)="onPageChange($event)" [maxSize]="0" [id]="'jobsTableResults'"></pagination-controls>
  <div *ngIf="totalItems > itemsPerPage" class="small">
    Page {{ page }} / <span class="text-muted">{{ totalPages }}</span>
  </div>
</div>

<div *ngIf="selectedJob">
  <app-job-detail-modal [job]="selectedJob" *ngIf="enableModal"></app-job-detail-modal>
</div>